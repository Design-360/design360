<div class="main-div">
 <div id="wrapper">
<%= render 'layouts/sidebar' %>

<% if @orders.present? %>
<div class="row wrapper border-bottom white-bg page-heading">
        
    <% if not (@orders.pending.present? or @orders.assigned.present? or @orders.complete.present?) %>
        <div class="col-lg-10">
            <h2>Orders</h2>
        </div>
        <div class="col-lg-2">
            <%= link_to 'Place Order', new_order_path, class:"btn btn-primary", style:"margin-top:15px;" %>
        </div>
    <% else %>
        <div class="col-lg-8">
            <h2>Orders</h2>
        </div>
        <div class="col-lg-4" style="margin-top:15px;">
            <p class="btn btn-primary" disabled>You have on-going orders. You cannot add new ones.</p>
        </div>
    <% end %>
</div>

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>Pending Orders</h5>
                
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content">

            <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover dataTables-example managers" >
            <thead>
            <tr>
                <th>Status</th>
                <th>Amount</th>
                <th>Deadline</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            <% @pending_orders.each do |o| %>
            <tr>
                <td><%= o.status %></td>
                <td><%= o.amount %></td>
                <td><%= o.duration %></td>
                <td><%= link_to "Edit", edit_order_path(o) %></td>
                <td><%= link_to "Delete",order_path(o), :method => :delete %></td>
                <td><%= link_to "Show", order_path(o) %></td>
            </tr>
            <% end %>
            </tbody>
            
            </table>
                </div>

            </div>
        </div>
    </div>
</div>
</div>

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>Completed Orders</h5>
                
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content">

            <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover dataTables-example managers" >
            <thead>
            <tr>
                <th>Manager</th>
                <th>Status</th>
                <th>Actions</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            <% @complete_orders.each do |o| %>
            <tr>
                <td><%= o.employee_order.employee.name %></td>
                <td><%= o.status %></td>
                <td><%= link_to "Show", order_path(o) %></td>
                <td><%#= link_to "Accept", order_path(o, :order => {:status => "Accepted", :template_id => o.template_id}), :method => :put %></td>
                <td><%#= link_to "Revise", order_path(o, :order => {:status => "In Revision", :template_id => o.template_id}), :method => :put %></td>
            </tr>
            <% end %>
            </tbody>
            
            </table>
                </div>

            </div>
        </div>
    </div>
</div>
</div>

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>Accepted Orders</h5>
                
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content">

            <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover dataTables-example managers" >
            <thead>
            <tr>
                <th>Manager</th>
                <th>Status</th>
                <th>Rating</th>
                <th>Review</th>
            </tr>
            </thead>
            <tbody>
            <% @accepted_orders.each do |o| %>
            <tr>
                <td><%= o.employee.name %></td>
                <td><%= o.status %></td>
                <td><%= o.rating %></td>
                <td><%= o.review %></td>
            </tr>
            <% end %>
            </tbody>
            
            </table>
                </div>

            </div>
        </div>
    </div>
</div>
</div>
<% else %>
<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>No Orders Yet</h2>
    </div>
    <div class="col-lg-2">
         <%= link_to 'Place Order', new_order_path, class:"btn btn-primary", style:"margin-top:15px;" %>
    </div>
</div>
<% end %>

<%= render 'layouts/footer' %>
</div>
</div>